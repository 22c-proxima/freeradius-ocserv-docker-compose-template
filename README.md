# VPN-платформа на базе FreeRADIUS и OpenConnect

## О проекте

Данный проект представляет собой контейнеризированную платформу для организации VPN-доступа с использованием [FreeRADIUS](freeradius/) и [OpenConnect Server (ocserv)](ocserv/). Для хранения и управления пользователями используется база данных [PostgreSQL](postgres/), а для мониторинга и администрирования — [pgAdmin](pgadmin/).

## Состав

- **FreeRADIUS** — сервер аутентификации, авторизации и учета (AAA), использующий PostgreSQL для хранения данных пользователей.
- **OpenConnect Server (ocserv)** — VPN-сервер, интегрированный с FreeRADIUS для проверки учетных данных и политик для пользователей.
- **PostgreSQL** — реляционная база данных для хранения информации о пользователях и сессиях.
- **pgAdmin** — веб-интерфейс для удобного управления и мониторинга базы данных PostgreSQL.

## Быстрый старт

1. Убедитесь, что установлен [Docker](https://www.docker.com/) и [Docker Compose](https://docs.docker.com/compose/).
2. Запустите все сервисы командой:

   ```sh
   docker compose up -d
   ```

3. Доступ к pgAdmin осуществляется по адресу [http://localhost:5050](http://localhost:5050).  
   Логин: `admin@localhost.localdomain`  
   Пароль: `changeme`

4. Установите и запустите Cisco AnyConnect, создайте подключение https://localhost, затем войдите под пользователем `test` с паролем `test`

## Структура проекта

- [`compose.yml`](compose.yml) — описание сервисов и их связей.
- [`freeradius/`](freeradius/) — конфигурация и скрипты FreeRADIUS.
- [`ocserv/`](ocserv/) — конфигурация OpenConnect Server.
- [`postgres/`](postgres/) — данные и конфигурация PostgreSQL.
- [`pgadmin/`](pgadmin/) — данные и настройки pgAdmin.

## Управление пользователями

- Сразу есть пользователи `demo` `123` и `test` `test`, на основе которых можно изучить работу групп и ограничений по пользователям и группам.
- Добавление и редактирование пользователей производится через pgAdmin или напрямую в базе данных PostgreSQL на основе документации FreeRADIUS.
- FreeRADIUS автоматически применяет изменения из БД при следующей аутентификации VPN-пользователей.

## Мониторинг

- Используйте pgAdmin для отслеживания состояния базы данных, просмотра активных сессий и управления пользователями.
- Используйте docker compose logs -f <название_сервиса> чтобы просмотреть логи его работы.

## Сбросить всё

- остановите проект с помощью команды
```sh
docker compose down
```
- Удалите директорию /postgres/data со всем её содержимым
